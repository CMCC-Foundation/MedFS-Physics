#!/bin/sh
# --------------------------------------------------------------------------- #
# w3_clean : Clean-up the work, test and scratch directories by removing the  #
#            files generated by WAVEWATCH III and its compilation system.     #
#                                                                             #
# use  : w3_clean                                                             #
#                                                      Hendrik L. Tolman      #
#                                                      May 2009               #
#                                                                             #
#    Copyright 2009 National Weather Service (NWS),                           #
#       National Oceanic and Atmospheric Administration.  All rights          #
#       reserved.  WAVEWATCH III is a trademark of the NWS.                   #
#       No unauthorized use without permission.                               #
#                                                                             #
# --------------------------------------------------------------------------- #
# 1. Preparations                                                             #
# --------------------------------------------------------------------------- #
# 1.a Internal variables - - - - - - - - - - - - - - - - - - - - - - - - - - - 

  ww3_env='.wwatch3.env'   # setup file

# 1.b Read data from the environment file  - - - - - - - - - - - - - - - - - -

  cd
  if test -f $ww3_env
  then
    set `grep WWATCH3_DIR $ww3_env` ; shift
    main_dir="$*"
    set `grep WWATCH3_TMP $ww3_env` ; shift
    temp_dir="$*"
  else
    echo "*** Set-up file $ww3_env not found ***"
    exit 2
  fi

# --------------------------------------------------------------------------- #
# 2. Scratch directory                                                        #
# --------------------------------------------------------------------------- #

  cd $temp_dir

  rm -f core
  rm -fr coredir.*
  rm -f *.f
  rm -f *.f90
  rm -f *.l
  rm -f *.o
  rm -f *.inp
  rm -f *.out
  rm -f *.err
  rm -f *.ps
  rm -f *.eps
  rm -f *.ww3
  rm -f *.mww3
  rm -f mod_def.*
  rm -f out_pnt.*
  rm -f out_grd.*
  rm -f restart*.*
  rm -f partition*.*
  rm -f buoy_log*.*
  rm -f log.*
  rm -f test.*
  rm -f test???.*
  rm -f w3list
  rm -f ww3.????????.*
  rm -f xnl4v5*
  rm -f quad*
  rm -f prf.*.mww3
  rm -f plot.grads*
  rm -f buoy.data
  rm -f fort.*
  rm -f times.*

# --------------------------------------------------------------------------- #
# 3. Work and test directories                                                #
# --------------------------------------------------------------------------- #

  for dir in $main_dir/work $main_dir/test
  do
    cd $dir
    rm -f core
    rm -fr coredir.*
    rm -f mod_def.ww3
    rm -f restart*.ww3
    rm -f nest*.ww3
    rm -f partition*.ww3
    rm -f buoy_log*.*
    rm -f out_pnt.*
    rm -f out_grd.*
    rm -f level.ww3
    rm -f current.ww3
    rm -f wind.ww3
    rm -f ice.ww3
    rm -f track_o.ww3
    rm -f track.ww3
    rm -f test.ww3
    rm -f test???.ww3
    rm -f test.mod*
    rm -f test???.mod*
    rm -f log.*
    rm -f tab??.*
    rm -f *.tab
    rm -f mask.ww3
    rm -f mapsta.ww3
    rm -f data?.ww3
    rm -f *.mww3
    rm -f *.out
    rm -f *.ps
    rm -f *.eps
    rm -f gmeta
    rm -f ww3.????????.*
    rm -f ww3_????.f
    rm -f ww3_????.tar
    rm -f gx_????.f
    rm -f gx_????.tar
    rm -f plot.grads*
    rm -f fort.*
    rm -f xnl4v5*
    rm -f quad*
    rm -f grads.*
    rm -f prf.*.mww3
    rm -f buoy.data
    rm -f buoy.all
    rm -f *.ctl
    rm -f ww3.*
    rm -f *.gs_tmpl
    rm -f times.*
  done

# End of w3_clean ----------------------------------------------------------- #
